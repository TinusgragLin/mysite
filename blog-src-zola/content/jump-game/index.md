+++
title="Greedy Algo: Jump Game"
description="My attack on the jump game problem."
date=2022-10-01

[taxonomies]
tags = ["greedy-algo"]
categories = ["algo"]

[extra]
math=true
+++

# Jump Game

$S=a_1,a_2,\cdots,a_n$

From left to right, when on $a_i$ ($1\le i<n$), if $i+a_i\ge n-1$ so we can jump directly to the end, then just jump to the end, otherwise, jump right $j\in[1,a_i]$ units onto $a_{i+j}$ so that $j+a_{i+j}$ is maximized:

$$\begin{aligned}\max_j\ j+a_{i+j} \cr \text{s.t.} \ {j\in[1,a_i]}\end{aligned}$$

Suppose the sequence of all the jump distances sequentially chosen by the algorithm is denoted by $P=j_1,j_2,\cdots,j_k$ such that $\sum_{i=1}^k j_i=n-1$. Now we **assume that $P$ is not optimal**, and let $Q=g_1,g_2,\cdots,g_m$ be the sequence of jump distance of one of the optimal solutions **that has the longest common prefix with** $P$ such that $m<k$ and $\sum_{i=1}^m g_i=n-1$. We put them together below:

$$\begin{aligned}&P=j_1,j_2,\cdots,j_m,\cdots,j_k\cr &Q=g_1,g_2,\cdots,g_m\end{aligned}$$

We compare $P$ and $Q$ from left to right, and assume that they start to differ after the $p$ elements where $0\le p<m$. Thus they agree on the first $p$ element(s), but differ at the $(p+1)$-th.

If $p=m-1$, then after $m-1$ jumps $j_1(g_1),j_2(g_2),\cdots,j_{m-1}(g_{m-1})$, the optimal answer $Q$ suggests that we can jump right $g_m$ units directly to the end, which the greedy algorithm will definitely choose to do and terminates itself afterwards and thus we will have $k=m$, a contradiction to the previous statement $m<k$. Thus in this case, we can conclude that $P$ must be optimal.

Otherwise, if $p<m-1$, then there are at least two moves after $g_p$ in $Q$:

$$\begin{aligned}&P=j_1,\cdots,j_p,j_{p+1},j_{p+2}\cdots,j_m,\cdots,j_k\cr &Q=g_1,\cdots,g_p,g_{p+1},g_{p+2}\cdots,g_m\end{aligned}$$

Let $r=1+\sum_{i=1}^pj_p=1+\sum_{i=1}^pg_p$ be the index of element in $S$ we land on after the first $p$ jumps, then we argue that

$$g_{p+1}+g_{p+2}\in [j_{p+1},j_{p+1}+a_{r+j_{p+1}}]$$

so that we can generate another sequence $R$ from $Q$ by replacing $g_{p+1},g_{p+2}$ with $j_{p+1},k_{p+2}$ where $k_{p+2}=g_{p+1}+g_{p+2}-j_{p+1}\le a_{r+j_{p+1}}$ and we claim that $R$ is a valid solution to the original problem and in fact, is also an optimal one. To see this, note that

1. $g_1,\cdots,g_{p}$ ($j_1,\cdots,j_{p}$) are clearly valid.
2. $j_{p+1}$ is a valid move since it is generated by the algorithm.
3. $k_{p+2}$ is also valid since $k_{p+2}\le a_{r+j_{p+1}}$.
4. Since $g_{p+1}+g_{p+2}=j_{p+1}+k_{p+2}$, we arrive at the same position before continuing with $g_{p+2},\cdots,g_m$, all of which are valid moves.
5. $\sum_{i=1}^m R[i]=n-1$.

And since $|R|=|Q|$, $R$ is also an optimal solution. Now here comes the contradiction: $R$ has a longer common prefix with $P$ than $Q$: $g_1,\cdots,g_p,j_{p+1}$, which contradicts the definition of $Q$. And thus, we can conclude that $P$ must be optimal.

The proof of $g_{p+1}+g_{p+2}\in [j_{p+1},j_{p+1}+a_{r+j_{p+1}}]$ is a bit of lengthy, we demonstrate the basic idea with a picture here:
